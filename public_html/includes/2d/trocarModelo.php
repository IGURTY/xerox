<?php
/*
Copyright (c) 2024 Jumptec
Se quiser obter a licenÃ§a para esse produto, acesse https://www.jumptec.com.br
*/
 include("../../adm/includes/configuracoes.php"); $vec8ca0a2553c=f42e3f489802e($_POST['modalidade'], 'int');$v98db9e75a333=f42e3f489802e($_POST['parte']);$vd865131024bb=f42e3f489802e($_POST['peca']); $v1d29f79865bc=array(); $v1d29f79865bc["det_ativos"]=array();$v0feae3824d58="SELECT modal_detalhes.* FROM tipo_modalidade_detalhes AS modal_detalhes    LEFT JOIN tipo_item AS item ON modal_detalhes.idtipo_item=item.id    WHERE modal_detalhes.idtipo_modalidade=".$vec8ca0a2553c." AND item.nome LIKE '".$vd865131024bb."' AND modal_detalhes.ativo=1";$vb42c55585203=mysqli_query($connection, $v0feae3824d58);$v9521bd642b23=0;$v8aa67bb60ba8=array(); while ($v95e5a566c3d6=mysqli_fetch_array($vb42c55585203, MYSQLI_ASSOC)){ foreach ($v95e5a566c3d6 as $vcf260d4fb620=>$v7d0596c36891){ if ($v95e5a566c3d6[$vcf260d4fb620]=="1" && ( $vcf260d4fb620 !="ativo" && $vcf260d4fb620 !="ordem" && strstr($vcf260d4fb620,'mostrar_')==false )){  $v9521bd642b23++;  array_push($v8aa67bb60ba8, $vcf260d4fb620);}}} if ($v9521bd642b23>0)  array_push($v1d29f79865bc["det_ativos"], $v8aa67bb60ba8); $vb66c8cb0ece9= "SELECT d_c.camada, d_c.idtipo_angulo, d_c.idcor, d_c.file_svg, d.*, t.nome AS tipo, t.parte AS parte, a.nome AS nome_angulo    FROM desenho AS d    LEFT JOIN desenho_camada AS d_c ON d.id=d_c.iddesenho    LEFT JOIN tipo_item t ON d.idtipo_item=t.id    LEFT JOIN tipo_angulo a ON d_c.idtipo_angulo=a.id    WHERE d.idtipo_modalidade=".$vec8ca0a2553c." AND (t.nome LIKE '".$vd865131024bb."') AND d.ativo=1    ORDER BY tipo, d.ordem ASC, d.titulo DESC, d.id DESC, d_c.camada ASC, d_c.idtipo_angulo ASC;";$v7ea4045f0fa3=mysqli_query($connection, $vb66c8cb0ece9);$v37076b56e2de=mysqli_num_rows($v7ea4045f0fa3);$v1d29f79865bc["det_desenhos"]=array();while ($v485aa7d5c51a=mysqli_fetch_array($v7ea4045f0fa3)){ if ($v9c342ac2a36e !=$v485aa7d5c51a['id']){ if (!empty($v9c342ac2a36e)){  $vda6120a67f7d="";  $va16d2280393c++;} $v9c342ac2a36e=$v485aa7d5c51a['id'];   if ($ve8f6c6e48120 !=f920e1658fbfc($v485aa7d5c51a['tipo'])){  $va16d2280393c=1;  $ve8f6c6e48120=f920e1658fbfc($v485aa7d5c51a['tipo']);}   $v1d29f79865bc["det_desenhos"][$va16d2280393c];   $v1d29f79865bc["det_desenhos"][$va16d2280393c]["modelo"]=strip_tags($v485aa7d5c51a['file_modelo']); $v1d29f79865bc["det_desenhos"][$va16d2280393c]["cod_modelo"]=$v485aa7d5c51a['codigo_modelo']; $v1d29f79865bc["det_desenhos"][$va16d2280393c]["cor_base"]=$v485aa7d5c51a['idcor_base'];    for ($v3e33e017cd76=0;$v3e33e017cd76<count($v8aa67bb60ba8);$v3e33e017cd76++){  $v4a2323668729="cor_".$v8aa67bb60ba8[$v3e33e017cd76];  $v1d29f79865bc["det_desenhos"][$va16d2280393c][$v4a2323668729]=$v485aa7d5c51a['idcor_'.$v8aa67bb60ba8[$v3e33e017cd76]];}}  if ($vda6120a67f7d !=$v485aa7d5c51a['camada'])  $vda6120a67f7d=$v485aa7d5c51a['camada'];  $v7b9728b3fe95="_".$v485aa7d5c51a['camada']; $v08044429cc6a=($v485aa7d5c51a['camada']=="") ? $va16d2280393c."_1" : $va16d2280393c.$v7b9728b3fe95; $v1d29f79865bc["det_desenhos"][$v08044429cc6a];  $v2d1a1b0c6303=$v485aa7d5c51a['idtipo_angulo']>1 ? "_".strtolower(f920e1658fbfc($v485aa7d5c51a['nome_angulo'])) : ""; $v99aafdb86627="svg".$v2d1a1b0c6303; $v5e0ba296dca7=($v485aa7d5c51a['file_svg']=="") ? "vazio.svg" : $v485aa7d5c51a['file_svg']; $v1d29f79865bc["det_desenhos"][$v08044429cc6a][$v99aafdb86627]=$v5e0ba296dca7;  $v1d29f79865bc["det_desenhos"][$v08044429cc6a]["cor"]=$v485aa7d5c51a['idcor'];}if ($v37076b56e2de==0){ $v1d29f79865bc["det_desenhos"][1];   $v1d29f79865bc["det_desenhos"][1]["modelo"]=""; $v1d29f79865bc["det_desenhos"][1]["cod_modelo"]=""; $v1d29f79865bc["det_desenhos"][1]["cor_base"]="";  for ($v3e33e017cd76=0;$v3e33e017cd76<count($v8aa67bb60ba8);$v3e33e017cd76++){ $v4a2323668729="cor_".$v8aa67bb60ba8[$v3e33e017cd76]; $v1d29f79865bc["det_desenhos"][1][$v4a2323668729]="";}  $v1d29f79865bc["det_desenhos"]["1_1"]["svg"]="vazio.svg"; $v1d29f79865bc["det_desenhos"]["1_1"]["svg_verso"]="vazio.svg";  $v1d29f79865bc["det_desenhos"]["1_1"]["cor"]="";}echo json_encode($v1d29f79865bc); mysqli_close($connection);?>